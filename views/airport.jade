extends layout_home

block breadcrumb
  li
    i.fa.fa-home
    a(href='/index') Inicio
    i.fa.fa-angle-right
  li #{location}
    i.fa.fa-angle-right
  li #{name}
    i.fa.fa-angle-right
  li
    i.fa.fa-gears 
    | Panel de Control

block menu_options
  include ../partials/menu.jade
block content
  .row-fluid
    .span4.statbox.green
      h1 Tareas Activas
      .footer Tareas que se están realizando por algún empleado
      .number
        | #{tasks_active.length}
      
    .span4.statbox.yellow
      h1 Tareas Pendientes
      .footer Tareas creadas pendientes de que empiece a ser realizada
      .number
        | #{tasks_pending.length}
    .span4.statbox.blue
      h1 Tareas Completadas
      .footer Tareas acabadas por cada una de las partes
      .number
        | #{tasks_complete.length}
  .row-fluid
    .span8.box
      .box-header
        | Asignaciones
      .box-content
        ul.dashboard-list.metro
          li.orangeDark
            h3 
              i.fa.fa-times.orangeDark
              | Tareas sin asignación o parcialmente asignadas
          table.table.table-bordered
            thead
              tr
                th ID Tarea
                th Pendientes
                th Categoría
                th Prioridad
                th Descripción
                th Acciones
            tbody
              -each task in tasks_nonasign
                tr
                  td= task.id_task
                  td #{task.pending} / #{task.n_employees}
                  td= task.type
                  td= task.priority
                  td= task.description
                  td 
                    button.btn(title="Reintentar la asignación")
                      i.fa.fa-refresh
          li.red
            h3 
              i.fa.fa-times.red
              | Trabajos Pausados o Cancelados
          table.table.table-bordered
            thead
              tr
                th ID Tarea
                th Empleado
                th Categoría
                th Prioridad
                th Registro
                th Estado
                th Descripción
            tbody
              -each work in works_stop
                tr
                  td= work.task.id_task
                  td= work.person.worker_name
                  td= work.task.type
                  td= work.task.priority
                  td= work.asign_at
                  td= work.state
                  td= work.task.description
          li.yellow
            h3
              i.fa.fa-minus.yellow
              | Trabajos Pendientes
          table.table.table-bordered
            thead
              tr
                th ID Tarea
                th Empleado
                th Categoría
                th Prioridad
                th Registro
                th Descripción
            tbody
              -each work in works_pending
                tr
                  td= work.task.id_task
                  td= work.person.worker_name
                  td= work.task.type
                  td= work.task.priority
                  td= moment(work.asign_at).format('HH:MM - DD.MM.YYYY')
                  td= work.task.description
          li.green
            h3 
              i.fa.fa-plus.green
              | Trabajos Activos
          table.table.table-bordered
            thead
              tr
                th ID Tarea
                th Empleado
                th Categoría
                th Prioridad
                th Registro
                th Descripción
            tbody
              -each work in works_active
                tr
                  td= work.task.id_task
                  td= work.person.worker_name
                  td= work.task.type
                  td= work.task.priority
                  td= moment(work.asign_at).format('HH:MM - DD.MM.YYYY')
                  td= work.task.description
          li.blue
            h3 
              i.fa.fa-check.blue
              | Trabajos Completados
          table.table.table-bordered
            thead
              tr
                th ID Tarea
                th Empleado
                th Categoría
                th Prioridad
                th Registro
                th Descripción
            tbody
              -each work in works_complete
                tr
                  td= work.task.id_task
                  td= work.person.worker_name
                  td= work.task.type
                  td= work.task.priority
                  td= moment(work.asign_at).format('HH:MM - DD.MM.YYYY')
                  td= work.task.description
    .span4.box
      .box-header
        | Empleados
      .box-content
        table.table.table-bordered
          thead
            tr
              th ID
              th Nombre
              th Categoría
              th Estado Actual
          tbody
            -each person in people
              tr
                td= person.worker_id
                td= person.worker_name
                td= person.worker_type
                td(class="#{person.state}")= person.state